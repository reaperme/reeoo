<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="baidu-site-verification" content="7Id75D7BP2" />
  <meta name="baidu_union_verify" content="3d4a8e490f086a4deb5c4f1b03c65138">
  
  <title>Gulp简易入坑 | Reeoo&#39;s Blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="在发现这个东西之前，前端构建我一直在用grunt，有一天同学给我说用gulp吧，比grunt更好用，于是乎我决定研究一番，看看这货到底是个什么好东西。">
<meta property="og:type" content="article">
<meta property="og:title" content="Gulp简易入坑">
<meta property="og:url" content="http://reeoo.co/archives/gulpjs.html">
<meta property="og:site_name" content="Reeoo's Blog">
<meta property="og:description" content="在发现这个东西之前，前端构建我一直在用grunt，有一天同学给我说用gulp吧，比grunt更好用，于是乎我决定研究一番，看看这货到底是个什么好东西。">
<meta property="og:image" content="http://reeooco.b0.upaiyun.com/gulpjs/gulp.png">
<meta property="og:image" content="http://reeooco.b0.upaiyun.com/gulpjs/grunt.png">
<meta property="og:image" content="http://reeooco.b0.upaiyun.com/gulpjs/gulptype.png">
<meta property="og:updated_time" content="2015-09-04T05:04:14.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Gulp简易入坑">
<meta name="twitter:description" content="在发现这个东西之前，前端构建我一直在用grunt，有一天同学给我说用gulp吧，比grunt更好用，于是乎我决定研究一番，看看这货到底是个什么好东西。">
  
    <link rel="alternative" href="/atom.xml" title="Reeoo&#39;s Blog" type="application/atom+xml">
  
  
    <link rel="icon" href="http://reeooco.b0.upaiyun.com/common/favicon.ico">
  
  <link rel="stylesheet" href="/css/style.css" type="text/css">
  <script src="http://libs.baidu.com/jquery/1.9.0/jquery.js"></script>
  <script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "//hm.baidu.com/hm.js?1eddc2697aa0eecd2468d62ba9e7b27a";
      var s = document.getElementsByTagName("script")[0]; 
      s.parentNode.insertBefore(hm, s);
    })();
  </script>
</head>
<body>
  <div id="container">
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
	<header id="header" class="inner">
		<a href="/" class="profilepic">
			<img lazy-src="http://reeooco.b0.upaiyun.com/avatar/nick.jpg" class="js-avatar">
		</a>

		<hgroup>
		  <h1 class="header-author"><a href="/">Reeoo</a></h1>
		</hgroup>

		
		<p class="header-subtitle">Hello, I&#39;m Reeoo</p>
		

		
			<div class="switch-btn">
				<div class="icon">
					<div class="icon-ctn">
						<div class="icon-wrap icon-house" data-idx="0">
							<div class="birdhouse"></div>
							<div class="birdhouse_holes"></div>
						</div>
						<div class="icon-wrap icon-ribbon hide" data-idx="1">
							<div class="ribbon"></div>
						</div>
						
						
						<div class="icon-wrap icon-me hide" data-idx="3">
							<div class="user"></div>
							<div class="shoulder"></div>
						</div>
						
					</div>
					
				</div>
				<div class="tips-box hide">
					<div class="tips-arrow"></div>
					<ul class="tips-inner">
						<li>菜单</li>
						<li>标签</li>
						
						
						<li>关于我</li>
						
					</ul>
				</div>
			</div>
		

		<div class="switch-area">
			<div class="switch-wrap">
				<section class="switch-part switch-part1">
					<nav class="header-menu">
						<ul>
						
							<li><a href="/">主页</a></li>
				        
							<li><a href="/archives">文章</a></li>
				        
						</ul>
					</nav>
					<nav class="header-nav">
						<div class="social">
							
								<a class="github" target="_blank" href="http://github.com/ireeoo" title="github">github</a>
					        
								<a class="weibo" target="_blank" href="http://weibo.com/ijandc" title="weibo">weibo</a>
					        
								<a class="rss" target="_blank" href="/atom.xml" title="rss">rss</a>
					        
								<a class="mail" target="_blank" href="mailto:ireeoo@163.com" title="mail">mail</a>
					        
						</div>
					</nav>
				</section>
				
				
				<section class="switch-part switch-part2">
					<div class="widget tagcloud" id="js-tagcloud">
						<a href="/tags/BrowserSync/" style="font-size: 10px;">BrowserSync</a> <a href="/tags/Compass/" style="font-size: 10px;">Compass</a> <a href="/tags/WebStorm/" style="font-size: 10px;">WebStorm</a> <a href="/tags/git/" style="font-size: 10px;">git</a> <a href="/tags/gulpjs/" style="font-size: 10px;">gulpjs</a> <a href="/tags/hexo/" style="font-size: 10px;">hexo</a> <a href="/tags/meta/" style="font-size: 10px;">meta</a> <a href="/tags/正则表达式/" style="font-size: 10px;">正则表达式</a>
					</div>
				</section>
				
				
				

				
				
				<section class="switch-part switch-part3">
				
					<div id="js-aboutme">这里貌似要写点东西，不然不是很和谐啊~</div>
				</section>
				
			</div>
		</div>
	</header>				
</div>
    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
  	<div class="overlay">
  		<div class="slider-trigger"></div>
  		<h1 class="header-author js-mobile-header hide">Reeoo</h1>
  	</div>
	<div class="intrude-less">
		<header id="header" class="inner">
			<div class="profilepic">
				<img lazy-src="http://reeooco.b0.upaiyun.com/avatar/nick.jpg" class="js-avatar">
			</div>
			<hgroup>
			  <h1 class="header-author">Reeoo</h1>
			</hgroup>
			
			<p class="header-subtitle">Hello, I&#39;m Reeoo</p>
			
			<nav class="header-menu">
				<ul>
				
					<li><a href="/">主页</a></li>
		        
					<li><a href="/archives">文章</a></li>
		        
		        <div class="clearfix"></div>
				</ul>
			</nav>
			<nav class="header-nav">
				<div class="social">
					
						<a class="github" target="_blank" href="http://github.com/ireeoo" title="github">github</a>
			        
						<a class="weibo" target="_blank" href="http://weibo.com/ijandc" title="weibo">weibo</a>
			        
						<a class="rss" target="_blank" href="/atom.xml" title="rss">rss</a>
			        
						<a class="mail" target="_blank" href="mailto:ireeoo@163.com" title="mail">mail</a>
			        
				</div>
			</nav>
		</header>				
	</div>
</nav>
      <div class="body-wrap"><article id="post-gulpjs" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/archives/gulpjs.html" class="article-date">
  	<time datetime="2015-06-26T02:02:46.000Z" itemprop="datePublished">2015-06-26</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      Gulp简易入坑
    </h1>
  

      </header>
      
      <div class="article-info article-info-post">
        
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/gulpjs/">gulpjs</a></li></ul>
	</div>

        
	<div class="article-category tagcloud">
	<a class="article-category-link" href="/categories/webtools/">webtools</a>
	</div>


        <div class="clearfix"></div>
      </div>
      
    
    <div class="article-entry" itemprop="articleBody">
		<!-- 文章目录生成 -->
		<!---->
		<!--<div id="toc" class="toc-article">-->
			<!--<strong class="toc-title">文章目录</strong>-->
			<!---->
		<!--</div>-->
		<!---->
      
        <p>在发现这个东西之前，前端构建我一直在用<code>grunt</code>，有一天同学给我说用<code>gulp</code>吧，比<code>grunt</code>更好用，于是乎我决定研究一番，看看这货到底是个什么好东西。<br><a id="more"></a><br><img src="http://reeooco.b0.upaiyun.com/gulpjs/gulp.png" alt="reeoo.co"></p>
<p>#Gulp vs Grunt<br>先来说说<code>grunt</code>，在使用grunt之前，首先要有一个<code>Gruntfile.js</code>文件，我目前项目中的大概是这么个样子：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br></pre></td><td class="code"><pre><span class="line"><span class="pi">'use strict'</span>;</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = <span class="function"><span class="keyword">function</span>(<span class="params">grunt</span>) </span>&#123;</span><br><span class="line">  grunt.initConfig(&#123;</span><br><span class="line">    pkg: grunt.file.readJSON(<span class="string">'package.json'</span>),</span><br><span class="line">    cssmin: &#123;</span><br><span class="line">      minify: &#123;</span><br><span class="line">        expand: <span class="literal">true</span>,</span><br><span class="line">        cwd: <span class="string">'css/'</span>,</span><br><span class="line">        src: [<span class="string">'*.css'</span>, <span class="string">'!*.min.css'</span>],</span><br><span class="line">        dest: <span class="string">'css/'</span>,</span><br><span class="line">        ext: <span class="string">'.min.css'</span></span><br><span class="line">      &#125;,</span><br><span class="line">      my_target: &#123;</span><br><span class="line">        files: [&#123;</span><br><span class="line">          expand: <span class="literal">true</span>,</span><br><span class="line">          cwd: <span class="string">'../style/'</span>,</span><br><span class="line">          src: [<span class="string">'*.css'</span>, <span class="string">'!*.min.css'</span>],</span><br><span class="line">          dest: <span class="string">'../build/style/'</span></span><br><span class="line">        &#125;]</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    copy: &#123;</span><br><span class="line">      main: &#123;</span><br><span class="line">        files: [</span><br><span class="line">          &#123;</span><br><span class="line">            expand: <span class="literal">true</span>,</span><br><span class="line">            cwd: <span class="string">'../views/'</span>,</span><br><span class="line">            src: [<span class="string">'**'</span>],</span><br><span class="line">            dest: <span class="string">'../build/views/'</span></span><br><span class="line">          &#125;, &#123;</span><br><span class="line">            expand: <span class="literal">true</span>,</span><br><span class="line">            cwd: <span class="string">'../img/'</span>,</span><br><span class="line">            src: [<span class="string">'**'</span>],</span><br><span class="line">            dest: <span class="string">'../build/img/'</span></span><br><span class="line">          &#125;, &#123;</span><br><span class="line">            expand: <span class="literal">true</span>,</span><br><span class="line">            cwd: <span class="string">'../'</span>,</span><br><span class="line">            src: [<span class="string">'main.html'</span>],</span><br><span class="line">            dest: <span class="string">'../build/'</span></span><br><span class="line">          &#125;, &#123;</span><br><span class="line">            expand: <span class="literal">true</span>,</span><br><span class="line">            cwd: <span class="string">'../'</span>,</span><br><span class="line">            src: [<span class="string">'*.txt'</span>],</span><br><span class="line">            dest: <span class="string">'../build/'</span></span><br><span class="line">          &#125;</span><br><span class="line">        ]</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    uglify: &#123;</span><br><span class="line">      buildall: &#123;</span><br><span class="line">        <span class="comment">//当'minify'任务运行时Grunt将自动在"lib/"下搜索"**/*.js", 然后构建适当的src-dest文件映射，因此你不需要在文件添加或者移除时更新Gruntfile</span></span><br><span class="line">        files: [&#123;</span><br><span class="line">          expand: <span class="literal">true</span>, <span class="comment">//启用动态扩展</span></span><br><span class="line">          cwd: <span class="string">'../config/'</span>, <span class="comment">//批匹配相对lib目录的src来源</span></span><br><span class="line">          src: <span class="string">'**/*.js'</span>, <span class="comment">//实际的匹配模式</span></span><br><span class="line">          dest: <span class="string">'../build/config/'</span> <span class="comment">//目标路径前缀</span></span><br><span class="line">        &#125;, &#123;</span><br><span class="line">          expand: <span class="literal">true</span>, <span class="comment">//启用动态扩展</span></span><br><span class="line">          cwd: <span class="string">'../js/controllers/'</span>, <span class="comment">//批匹配相对lib目录的src来源</span></span><br><span class="line">          src: <span class="string">'**/*.js'</span>, <span class="comment">//实际的匹配模式</span></span><br><span class="line">          dest: <span class="string">'../build/js/controllers/'</span> <span class="comment">//目标路径前缀</span></span><br><span class="line">        &#125;, &#123;</span><br><span class="line">          expand: <span class="literal">true</span>, <span class="comment">//启用动态扩展</span></span><br><span class="line">          cwd: <span class="string">'../js/directive/'</span>, <span class="comment">//批匹配相对lib目录的src来源</span></span><br><span class="line">          src: <span class="string">'**/*.js'</span>, <span class="comment">//实际的匹配模式</span></span><br><span class="line">          dest: <span class="string">'../build/js/directive/'</span> <span class="comment">//目标路径前缀</span></span><br><span class="line">        &#125;, &#123;</span><br><span class="line">          expand: <span class="literal">true</span>, <span class="comment">//启用动态扩展</span></span><br><span class="line">          cwd: <span class="string">'../js/filter/'</span>, <span class="comment">//批匹配相对lib目录的src来源</span></span><br><span class="line">          src: <span class="string">'**/*.js'</span>, <span class="comment">//实际的匹配模式</span></span><br><span class="line">          dest: <span class="string">'../build/js/filter/'</span> <span class="comment">//目标路径前缀</span></span><br><span class="line">        &#125;, &#123;</span><br><span class="line">          expand: <span class="literal">true</span>, <span class="comment">//启用动态扩展</span></span><br><span class="line">          cwd: <span class="string">'../js/service/'</span>, <span class="comment">//批匹配相对lib目录的src来源</span></span><br><span class="line">          src: <span class="string">'**/*.js'</span>, <span class="comment">//实际的匹配模式</span></span><br><span class="line">          dest: <span class="string">'../build/js/service/'</span> <span class="comment">//目标路径前缀</span></span><br><span class="line">        &#125;]</span><br><span class="line">      &#125;,</span><br><span class="line">      builda: &#123;</span><br><span class="line">        files: &#123;</span><br><span class="line">          <span class="string">'../build/js/app.js'</span>: [<span class="string">'../js/app.js'</span>],</span><br><span class="line">          <span class="string">'../build/js/libs/bridge.1.1.0.js'</span>: [<span class="string">'../js/libs/bridge.1.1.0.js'</span>]</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      release: &#123;</span><br><span class="line">        files: &#123;</span><br><span class="line">          <span class="string">'../build/js/libs/libs.min.js'</span>: [<span class="string">'../js/libs/zepto.20140520.js'</span>, <span class="string">'../js/libs/angular.min.js'</span>, <span class="string">'../js/libs/*.js'</span>, <span class="string">'!../js/libs/bridge.1.1.0.js'</span>, <span class="string">'!../js/libs/libs.min.js'</span>]</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line">  grunt.loadNpmTasks(<span class="string">'grunt-contrib-copy'</span>);</span><br><span class="line">  grunt.loadNpmTasks(<span class="string">'grunt-contrib-jshint'</span>); <span class="comment">//检查js语法错误</span></span><br><span class="line">  grunt.loadNpmTasks(<span class="string">'grunt-contrib-concat'</span>); <span class="comment">//合并文件</span></span><br><span class="line">  grunt.loadNpmTasks(<span class="string">'grunt-contrib-uglify'</span>); <span class="comment">//压缩代码</span></span><br><span class="line">  grunt.loadNpmTasks(<span class="string">'grunt-contrib-cssmin'</span>); <span class="comment">//css压缩</span></span><br><span class="line">  </span><br><span class="line">  grunt.registerTask(<span class="string">'default'</span>, [<span class="string">'copy'</span>, <span class="string">'cssmin'</span>, <span class="string">'uglify'</span>]);</span><br><span class="line"></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p>
<p>再来看<code>gulp</code>的，<code>gulp</code>需要一个<code>gulpfile.js</code>文件，我目前项目中的是这个样子：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> gulp = <span class="built_in">require</span>(<span class="string">'gulp'</span>),<span class="comment">//gulp基础库</span></span><br><span class="line">    concat = <span class="built_in">require</span>(<span class="string">'gulp-concat'</span>),<span class="comment">//合并文件</span></span><br><span class="line">    cssmin = <span class="built_in">require</span>(<span class="string">'gulp-minify-css'</span>),<span class="comment">//压缩css</span></span><br><span class="line">    htmlmin = <span class="built_in">require</span>(<span class="string">"gulp-htmlmin"</span>),<span class="comment">//压缩html</span></span><br><span class="line">    jsmin = <span class="built_in">require</span>(<span class="string">'gulp-uglify'</span>),<span class="comment">//压缩js</span></span><br><span class="line">    rename = <span class="built_in">require</span>(<span class="string">'gulp-rename'</span>),<span class="comment">//重命名文件</span></span><br><span class="line">    clean = <span class="built_in">require</span>(<span class="string">"gulp-clean"</span>),<span class="comment">//清理目录</span></span><br><span class="line">    replace = <span class="built_in">require</span>(<span class="string">'gulp-replace'</span>),<span class="comment">//文本替换</span></span><br><span class="line">    processhtml = <span class="built_in">require</span>(<span class="string">'gulp-processhtml'</span>),<span class="comment">//处理html文件</span></span><br><span class="line">    addsrc = <span class="built_in">require</span>(<span class="string">'gulp-add-src'</span>),<span class="comment">//添加额外的文件流</span></span><br><span class="line">    option = &#123;</span><br><span class="line">        buildPath: <span class="string">"../dist"</span><span class="comment">//构建目录</span></span><br><span class="line">    &#125;;</span><br><span class="line"><span class="comment">//构建目录清理</span></span><br><span class="line">gulp.task(<span class="string">"clean"</span>, <span class="function"><span class="keyword">function</span> (<span class="params">done</span>) </span>&#123;</span><br><span class="line">    <span class="comment">//return cache.clearAll(done);</span></span><br><span class="line">    <span class="keyword">return</span> gulp.src(option.buildPath, &#123;</span><br><span class="line">        read: <span class="literal">false</span></span><br><span class="line">    &#125;)</span><br><span class="line">    .pipe(clean(&#123;force: <span class="literal">true</span>&#125;));</span><br><span class="line"></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">gulp.task(<span class="string">"imgcopy"</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;<span class="comment">//图片拷贝</span></span><br><span class="line">    gulp.src(<span class="string">"../img/**/*"</span>)</span><br><span class="line">    .pipe(gulp.dest(option.buildPath + <span class="string">'/img/'</span>))</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">//js文件压缩</span></span><br><span class="line">gulp.task(<span class="string">'jsmin'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    gulp.src([<span class="string">"../js/**/**/*.js"</span>,<span class="string">'!../js/libs/*.js'</span>])</span><br><span class="line">        .pipe(jsmin())</span><br><span class="line">        .pipe(gulp.dest(option.buildPath+ <span class="string">"/js/"</span>))</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">//需要合并和压缩的文件</span></span><br><span class="line">gulp.task(<span class="string">'concat'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    gulp.src([<span class="string">'../js/libs/angular.min.js'</span>,<span class="string">'../js/libs/*.js'</span>, <span class="string">'!../js/libs/bridge*.js'</span>])</span><br><span class="line">        .pipe(concat(<span class="string">'libs.min.js'</span>))</span><br><span class="line">        .pipe(jsmin())</span><br><span class="line">        .pipe(addsrc(<span class="string">'../js/libs/bridge*.js'</span>))</span><br><span class="line">        .pipe(jsmin())</span><br><span class="line">        .pipe(gulp.dest(option.buildPath + <span class="string">"/js/libs/"</span>))</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">gulp.task(<span class="string">"processhtml"</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> date = <span class="keyword">new</span> <span class="built_in">Date</span>().getTime();</span><br><span class="line">    gulp.src(<span class="string">'../main.html'</span>)</span><br><span class="line">        .pipe(replace(<span class="regexp">/_VERSION_/gi</span>, date))</span><br><span class="line">        .pipe(processhtml())</span><br><span class="line">        .pipe(htmlmin(&#123;</span><br><span class="line">            collapseWhitespace: <span class="literal">true</span></span><br><span class="line">        &#125;))</span><br><span class="line">        .pipe(gulp.dest(option.buildPath + <span class="string">'/'</span>))</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">//压缩css</span></span><br><span class="line">gulp.task(<span class="string">"cssmin"</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    gulp.src(<span class="string">"../style/*.css"</span>)</span><br><span class="line">        .pipe(cssmin())</span><br><span class="line">        .pipe(gulp.dest(option.buildPath + <span class="string">'/style'</span>))</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">//压缩html文件</span></span><br><span class="line">gulp.task(<span class="string">"htmlmin"</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    gulp.src(<span class="string">'../views/**/*.html'</span>)</span><br><span class="line">        .pipe(htmlmin(&#123;</span><br><span class="line">            collapseWhitespace: <span class="literal">true</span></span><br><span class="line">        &#125;))</span><br><span class="line">        .pipe(gulp.dest(option.buildPath + <span class="string">'/views'</span>))</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 默认任务 清空图片、样式、js并重建 运行语句 gulp</span></span><br><span class="line">gulp.task(<span class="string">'default'</span>, [<span class="string">'clean'</span>], <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    gulp.start(<span class="string">'jsmin'</span>, <span class="string">'cssmin'</span>, <span class="string">'processhtml'</span>, <span class="string">"htmlmin"</span>, <span class="string">'imgcopy'</span>, <span class="string">'concat'</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p>
<p><code>Grunt</code>处理任务的流程：<br><img src="http://reeooco.b0.upaiyun.com/gulpjs/grunt.png" alt="reeoo.co"><br><code>gulp</code>处理任务：<br><img src="http://reeooco.b0.upaiyun.com/gulpjs/gulptype.png" alt="reeoo.co"></p>
<p>写<code>Gruntfile.js</code>的时候，你要按照别人定好的规则来写配置文件，每个任务的配置文件规则（<code>JSON</code>格式）可能都不尽相同，而写<code>gulpfile.js</code>的时候，你只需要了解4个gulp的方法就可以了，即使你要写配置文件（比如项目的构建目录是哪里，css文件的目录又是哪个，你可以写个JSON来标明），那这个配置文件的格式也是掌握在你自己的手里，想怎么写就怎么写，根本不用关心具体的格式，只要声明完格式，待会自己用到的时候记得就好了。<code>grunt</code>是基于配置文件来做构建的，而<code>gulp</code>采用的是代码优于配置的策略，一个是写配置文件，一个是写代码，个人还是比较倾向于后者。</p>
<p>此外，使用<code>grunt</code>的<code>I/O</code>过程中会产生一些中间态的临时文件，A任务处理完会生成一个临时文件，B任务会读取这个临时文件，继续做自己的操作，然后再生成一个临时文件，给C任务用，以此类推，其它任务可能会基于临时文件再做处理并生成最终的构建后文件。</p>
<p>而使用<code>gulp</code>的优势就是利用流的方式进行文件的处理，通过管道将多个任务和操作连接起来，因此只有一次<code>I/O</code>的过程，流程更清晰，更纯粹。构建速度也要比<code>grunt</code>快，但是如果构建的项目很小，可能差距就体现不出来了。</p>
<p>#Gulp为什么快</p>
<ul>
<li>使用<a href="https://github.com/orchestrator/orchestrator/" target="_blank" rel="external">orchestrator</a>任务系统,最大限度的并发运行多个任务.</li>
<li>每个plugin只做一件事,做好一件事, 提升处理速度</li>
<li>流式处理,极少的文件IO</li>
</ul>
<p>#Gulp.js的核心设计<br><a href="http://gulpjs.com" target="_blank" rel="external">gulp官网</a>上的简介是The <code>streaming build system</code>，<br>核心的词是<code>streaming</code>（流动式），<code>Gulp.js</code>的精髓在于对<code>Node.js</code>中<code>Streams API</code>的利用，<br>所以想要理解<code>Gulp.js</code>，我们必须理解<code>Streams</code>，<code>streaming</code>其实就是<code>Streams</code>的设计思想，<br>但是像我这种对<code>Node.js</code>只是一知半解的就只说到这里了，有兴趣的可以自行<code>google</code>。</p>
<p>#gulp快速上手</p>
<ol>
<li><p>首先确保你已经正确安装了<code>nodejs</code>环境。然后以全局方式安装<code>gulp</code>：</p>
 <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm <span class="operator"><span class="keyword">install</span> -<span class="keyword">g</span> gulp</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>全局安装<code>gulp</code>后，还需要在每个要使用<code>gulp</code>的项目中都单独安装一次。把目录切换到你的项目文件夹中，然后在命令行中执行：</p>
 <figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm <span class="keyword">install</span> gulp</span><br></pre></td></tr></table></figure>
<p> 如果想在安装的时候把<code>gulp</code>写进项目<code>package.json</code>文件的依赖中，则可以加上<code>–save-dev</code>：</p>
 <figure class="highlight q"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm install --<span class="built_in">save</span>-<span class="built_in">dev</span> gulp</span><br></pre></td></tr></table></figure>
</li>
<li><p>在项目根目录创建gulpfile.js文件</p>
 <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> gulp = <span class="built_in">require</span>(<span class="string">'gulp'</span>);</span><br><span class="line"></span><br><span class="line">gulp.task(<span class="string">'default'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'hello world'</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
</li>
<li><p>运行gulp</p>
 <figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$ </span>gulp</span><br></pre></td></tr></table></figure>
<p> 默认任务将被运行，向控制台输出<code>hello world</code>。<br> 如果需要运行单个任务, 使用 <code>gulp taskname</code>命令。</p>
</li>
</ol>
<p>#Gulp api速览<br>使用<code>gulp</code>，仅需知道4个API即可：<code>gulp.task()</code>,<code>gulp.src()</code>,<code>gulp.dest()</code>,<code>gulp.watch()</code>，所以很容易就能掌握。</p>
<p>##gulp.src(globs[, options])<br><code>gulp.src()</code>方法正是用来获取流的，但要注意这个流里的内容不是原始的文件流，而是一个虚拟文件对象流，这个虚拟文件对象中存储着原始文件的路径、文件名、内容等信息，本文暂不对文件流进行展开，你只需简单的理解可以用这个方法来读取你需要操作的文件就行了，<code>globs</code>参数是文件匹配模式(类似正则表达式)，用来匹配文件路径(包括文件名)，当然这里也可以直接指定某个具体的文件路径。当有多个匹配模式时，该参数可以为一个数组。<br><code>options</code>为可选参数。通常情况下我们不需要用到，暂不考虑。</p>
<p>###文件匹配模式<br><code>Gulp</code>内部使用了<code>node-glob</code>模块来实现其文件匹配功能。我们可以使用下面这些特殊的字符来匹配我们想要的文件：</p>
<ul>
<li><code>*</code> 匹配文件路径中的0个或多个字符，但不会匹配路径分隔符，除非路径分隔符出现在末尾</li>
<li><code>**</code> 匹配路径中的0个或多个目录及其子目录,需要单独出现，即它左右不能有其他东西了。如果出现在末尾，也能匹配文件。</li>
<li><code>?</code>匹配文件路径中的一个字符(不会匹配路径分隔符)</li>
<li><code>[...]</code> 匹配方括号中出现的字符中的任意一个，当方括号中第一个字符为^或!时，则表示不匹配方括号中出现的其他字符中的任意一个，类似js正则表达式中的用法<code>!(pattern|pattern|pattern)</code>匹配任何与括号中给定的任一模式都不匹配的</li>
<li><code>?(pattern|pattern|pattern)</code>匹配括号中给定的任一模式0次或1次，类似于js正则中的<code>(pattern|pattern|pattern)?</code></li>
<li><code>+(pattern|pattern|pattern)</code>匹配括号中给定的任一模式至少1次，类似于js正则中的<code>(pattern|pattern|pattern)+</code></li>
<li><code>*(pattern|pattern|pattern)</code>匹配括号中给定的任一模式0次或多次，类似于js正则中的(pattern|pattern|pattern)*</li>
<li><code>@(pattern|pattern|pattern)</code>匹配括号中给定的任一模式1次，类似于js正则中的<code>(pattern|pattern|pattern)</code></li>
</ul>
<p>文件匹配列子：</p>
<ul>
<li><code>*</code> 能匹配 <code>reeoo.js</code>,<code>reeoo.css</code>,<code>reeoo</code>,<code>reeoo/</code>,但不能匹配<code>reeoo/reeoo.js</code></li>
<li><code>*.*</code>能匹配 <code>reeoo.js</code>,<code>reeoo.css</code>,<code>reeoo.html</code></li>
<li><code>*/*/*.js</code>能匹配 <code>r/e/o.js</code>,<code>a/b/c.js</code>,不能匹配<code>a/b.js</code>,<code>a/b/c/d.js</code></li>
<li><code>**</code>能匹配 <code>reeoo</code>,<code>reeoo/reeoo.js</code>,<code>reeoo/reeoo/reeoo.js</code>,<code>reeoo/reeoo/reeoo</code>,<code>reeoo/reeoo/reeoo/reeoo.co</code>,能用来匹配所有的目录和文件</li>
<li><code>**/*.js</code>能匹配 <code>reeoo.js</code>,<code>reeoo/reeoo.js</code>,<code>reeoo/reeoo/reeoo.js</code>,<code>reeoo/reeoo/reeoo/reeoo.js</code></li>
<li><code>reeoo/**/co</code>能匹配 <code>reeoo/co</code>,<code>reeoo/ooo/co</code>,<code>reeoo/a/b/co</code>,<code>reeoo/d/g/h/j/k/co</code></li>
<li><code>reeoo/**b/co</code>能匹配 <code>reeoo/b/co</code>,<code>reeoo/sb/co</code>,但不能匹配<code>reeoo/x/sb/co</code>,因为只有单<code>**</code>单独出现才能匹配多级目录</li>
<li><code>?.js</code>能匹配 <code>reeoo.js</code>,<code>reeoo1.js</code>,<code>reeoo2.js</code></li>
<li><code>reeoo??</code>能匹配 <code>reeoo.co</code>,<code>reeooco</code>,但不能匹配<code>reeooco/</code>,因为它不会匹配路径分隔符</li>
<li><code>[reo].js</code>只能匹配 <code>r.js</code>,<code>e.js</code>,<code>o.js</code>,不会匹配<code>re.js</code>,<code>reo.js</code>等,整个中括号只代表一个字符</li>
<li><code>[^reo].js</code>能匹配 <code>a.js</code>,<code>b.js</code>,<code>c.js</code>等,不能匹配<code>r.js</code>,<code>e.js</code>,<code>o.js</code></li>
</ul>
<p>当有多种匹配模式时可以使用数组<br><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//使用数组的方式来匹配多种文件</span></span><br><span class="line">gulp.<span class="function"><span class="title">src</span><span class="params">([<span class="string">'js/*.js'</span>,<span class="string">'css/*.css'</span>,<span class="string">'*.html'</span>])</span></span></span><br></pre></td></tr></table></figure></p>
<p>使用数组的方式还有一个好处就是可以很方便的使用排除模式，在数组中的单个匹配模式前加上<code>!</code>即是排除模式，它会在匹配的结果中排除这个匹配，要注意一点的是<code>不能在数组中的第一个元素</code>中使用排除模式</p>
<p><code>gulp.src([*.js,&#39;!r*.js&#39;])</code>匹配所有js文件，但排除掉以r开头的js文件<br><code>gulp.src([&#39;!r*.js&#39;,*.js])</code>不会排除任何文件，因为排除模式不能出现在数组的第一个元素中<br>此外，还可以使用展开模式。展开模式以花括号作为定界符，根据它里面的内容，会展开为多个模式，最后匹配的结果为所有展开的模式相加起来得到的结果。展开的例子如下：</p>
<ul>
<li><code>r{e,o}c</code>会展开为 <code>rec</code>,<code>roc</code></li>
<li><code>r{e,}o</code>会展开为 <code>reo</code>,<code>ro</code></li>
<li><code>r{0..3}o</code>会展开为 <code>r0o</code>,<code>r1do</code>,<code>r2o</code>,<code>r3o</code></li>
</ul>
<p>##gulp.dest(path[,options])</p>
<p><code>gulp.dest()</code>方法是用来写文件的，<code>path</code>为写入文件的路径,<code>options</code>为一个可选的参数对象，通常我们不需要用到，暂不考虑。<br>要想使用好<code>gulp.dest()</code>这个方法，就要理解给它传入的路径参数与最终生成的文件的关系。<br><code>gulp</code>的使用流程一般是这样子的：首先通过<code>gulp.src()</code>方法获取到我们想要处理的文件流，然后把文件流通过<code>pipe</code>方法导入到<code>gulp</code>的插件中，最后把经过插件处理后的流再通过<code>pipe</code>方法导入到<code>gulp.dest()</code>中，<code>gulp.dest()</code>方法则把流中的内容写入到文件中，这里首先需要弄清楚的一点是，我们给<code>gulp.dest()</code>传入的路径参数，只能用来指定要生成的文件的目录，而不能指定生成文件的文件名，它生成文件的文件名使用的是导入到它的文件流自身的文件名，所以生成的文件名是由导入到它的文件流决定的，即使我们给它传入一个带有文件名的路径参数，然后它也会把这个文件名当做是目录名，例如：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> gulp = <span class="built_in">require</span>(<span class="string">'gulp'</span>);</span><br><span class="line">gulp.src(<span class="string">'script/jquery.js'</span>)</span><br><span class="line">    .pipe(gulp.dest(<span class="string">'dist/foo.js'</span>));</span><br><span class="line"><span class="comment">//最终生成的文件路径为 dist/foo.js/jquery.js,而不是dist/foo.js</span></span><br></pre></td></tr></table></figure></p>
<p>要想改变文件名，可以使用插件<code>gulp-rename</code></p>
<p>下面说说生成的文件路径与我们给<code>gulp.dest()</code>方法传入的路径参数之间的关系。<br><code>gulp.dest(path)</code>生成的文件路径是我们传入的<code>path</code>参数后面再加上<code>gulp.src()</code>中有通配符开始出现的那部分路径。例如：<br><figure class="highlight gherkin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">var gulp = reruire('gulp');</span><br><span class="line">//有通配符开始出现的那部分路径为 <span class="keyword">*</span><span class="keyword">*</span>/<span class="keyword">*</span>.js</span><br><span class="line">gulp.src('script/<span class="keyword">*</span><span class="keyword">*</span>/<span class="keyword">*</span>.js')</span><br><span class="line">    .pipe(gulp.dest('dist')); //最后生成的文件路径为 dist/<span class="keyword">*</span><span class="keyword">*</span>/<span class="keyword">*</span>.js</span><br><span class="line">//如果 <span class="keyword">*</span><span class="keyword">*</span>/<span class="keyword">*</span>.js 匹配到的文件为 jquery/jquery.js ,则生成的文件路径为 dist/jquery/jquery.js</span><br></pre></td></tr></table></figure></p>
<p>再举更多一点的例子<br><figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">gulp.src(<span class="string">'script/avalon/avalon.js'</span>) <span class="comment">//没有通配符出现的情况</span></span><br><span class="line">    .pipe(gulp.dest(<span class="string">'dist'</span>)); <span class="comment">//最后生成的文件路径为 dist/avalon.js</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//有通配符开始出现的那部分路径为 **/underscore.js</span></span><br></pre></td></tr></table></figure></p>
<figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">gulp.src(<span class="string">'script/**/underscore.js'</span>)</span><br><span class="line">    <span class="comment">//假设匹配到的文件为script/util/underscore.js</span></span><br><span class="line">    .pipe(gulp.dest(<span class="string">'dist'</span>)); <span class="comment">//则最后生成的文件路径为 dist/util/underscore.js</span></span><br><span class="line"></span><br><span class="line">gulp.src(<span class="string">'script/*'</span>) <span class="comment">//有通配符出现的那部分路径为 *</span></span><br><span class="line">    <span class="comment">//假设匹配到的文件为script/zepto.js</span></span><br><span class="line">    .pipe(gulp.dest(<span class="string">'dist'</span>)); <span class="comment">//则最后生成的文件路径为 dist/zepto.js</span></span><br></pre></td></tr></table></figure>
<p>通过指定<code>gulp.src()</code>方法配置参数中的<code>base</code>属性，我们可以更灵活的来改变<code>gulp.dest()</code>生成的文件路径。<br>当我们没有在<code>gulp.src()</code>方法中配置<code>base</code>属性时，<code>base</code>的默认值为通配符开始出现之前那部分路径，例如：<br><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gulp.<span class="function"><span class="title">src</span><span class="params">(<span class="string">'app/src/**/*.css'</span>)</span></span> <span class="comment">//此时base的值为 app/src</span></span><br></pre></td></tr></table></figure></p>
<p>上面我们说的<code>gulp.dest()</code>所生成的文件路径的规则，其实也可以理解成，用我们给<code>gulp.dest()</code>传入的路径替换掉<code>gulp.src()</code>中的<code>base</code>路径，最终得到生成文件的路径。<br><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">gulp.<span class="function"><span class="title">src</span><span class="params">(<span class="string">'app/src/**/*.css'</span>)</span></span> <span class="comment">//此时base的值为app/src,也就是说它的base路径为app/src</span></span><br><span class="line">     <span class="comment">//设该模式匹配到了文件 app/src/css/normal.css</span></span><br><span class="line">    .<span class="function"><span class="title">pipe</span><span class="params">(gulp.dest(<span class="string">'dist'</span>)</span></span>) <span class="comment">//用dist替换掉base路径，最终得到 dist/css/normal.css</span></span><br></pre></td></tr></table></figure></p>
<p>所以改变<code>base</code>路径后，<code>gulp.dest()</code>生成的文件路径也会改变<br><figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">gulp.src(script/<span class="class"><span class="keyword">lib</span>/*.<span class="title">js</span>) //没有配置<span class="title">base</span>参数，此时默认的<span class="title">base</span>路径为<span class="title">script</span>/<span class="title">lib</span></span></span><br><span class="line">    /<span class="regexp">/假设匹配到的文件为script/lib</span><span class="regexp">/jquery.js</span><br><span class="line">    .pipe(gulp.dest('build')) /</span><span class="regexp">/生成的文件路径为 build/jquery</span>.js</span><br></pre></td></tr></table></figure></p>
<figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">gulp.src(script/<span class="class"><span class="keyword">lib</span>/*.<span class="title">js</span>, &#123;<span class="title">base</span>:'<span class="title">script</span>'&#125;) //配置了<span class="title">base</span>参数，此时<span class="title">base</span>路径为<span class="title">script</span></span></span><br><span class="line">    /<span class="regexp">/假设匹配到的文件为script/lib</span><span class="regexp">/jquery.js</span><br><span class="line">    .pipe(gulp.dest('build')) /</span><span class="regexp">/此时生成的文件路径为 build/lib</span><span class="regexp">/jquery.js</span></span><br></pre></td></tr></table></figure>
<p>用<code>gulp.dest()</code>把文件流写入文件后，文件流仍然可以继续使用。</p>
<p>##gulp.task(name[, deps], fn)<br><code>gulp.task</code>方法用来定义任务，<br><code>name</code> 为任务名，<br><code>deps</code> 是当前定义的任务需要依赖的其他任务，<br>为一个数组。当前定义的任务会在所有依赖的任务执行完毕后才开始执行。<br>如果没有依赖，则可省略这个参数，<br><code>fn</code>为任务函数，我们把任务要执行的代码都写在里面。该参数也是可选的。</p>
<p>##gulp.watch(glob[, opts], tasks)<br><code>gulp.watch()</code>用来监视文件的变化，当文件发生变化后，我们可以利用它来执行相应的任务，例如文件压缩等。<br><code>glob</code> 为要监视的文件匹配模式，规则和用法与<code>gulp.src()</code>方法中的glob相同。<br><code>opts</code> 为一个可选的配置对象，通常不需要用到，暂不考虑。<br><code>tasks</code> 为文件变化后要执行的任务，为一个数组，<br>    <figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">gulp.task(<span class="string">'uglify'</span>,<span class="function"><span class="keyword">function</span><span class="params">()</span></span>&#123;</span><br><span class="line">  <span class="comment">//do something</span></span><br><span class="line">&#125;);</span><br><span class="line">gulp.task(<span class="string">'reload'</span>,<span class="function"><span class="keyword">function</span><span class="params">()</span></span>&#123;</span><br><span class="line">  <span class="comment">//do something</span></span><br><span class="line">&#125;);</span><br><span class="line">gulp.watch(<span class="string">'js/**/*.js'</span>, [<span class="string">'uglify'</span>,<span class="string">'reload'</span>]);</span><br></pre></td></tr></table></figure></p>
<p>gulp.watch()还有另外一种使用方式：</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gulp.<span class="function"><span class="title">watch</span><span class="params">(glob[, opts, cb])</span></span></span><br></pre></td></tr></table></figure>
<p><code>glob</code>和<code>opts</code>参数与第一种用法相同<br><code>cb</code>参数为一个函数。每当监视的文件发生变化时，就会调用这个函数,并且会给它传入一个对象，该对象包含了文件变化的一些信息，<code>type</code>属性为变化的类型，可以是<code>added</code>,<code>changed</code>,<code>deleted</code>；<code>path</code>属性为发生变化的文件的路径<br>    <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">gulp.watch(<span class="string">'js/**/*.js'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">event</span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(event.type); <span class="comment">//变化类型 added为新增,deleted为删除，changed为改变 </span></span><br><span class="line">    <span class="built_in">console</span>.log(event.path); <span class="comment">//变化的文件的路径</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p>
<p>#常用的gulp插件介绍</p>
<p>##js文件压缩<br>使用<a href="https://www.npmjs.com/packages/gulp-uglify/" target="_blank" rel="external">gulp-uglify</a><br>安装：<code>npm install --save-dev gulp-uglify</code><br>用来压缩<code>js</code>文件，使用的是<code>uglify</code>引擎<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> gulp = <span class="built_in">require</span>(<span class="string">'gulp'</span>),</span><br><span class="line">    uglify = <span class="built_in">require</span>(<span class="string">"gulp-uglify"</span>);</span><br><span class="line"></span><br><span class="line">gulp.task(<span class="string">'minify-js'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    gulp.src(<span class="string">'js/*.js'</span>) <span class="comment">// 要压缩的js文件</span></span><br><span class="line">    .pipe(uglify())</span><br><span class="line">    .pipe(gulp.dest(<span class="string">'dist/js'</span>)); <span class="comment">//压缩后的路径</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p>
<p>##重命名文件<br>使用<a href="https://www.npmjs.com/packages/gulp-rename/" target="_blank" rel="external">gulp-rename</a><br>安装：<code>npm install --save-dev gulp-rename</code><br>用来重命名文件流中的文件。用<code>gulp.dest()</code>方法写入文件时，文件名使用的是文件流中的文件名，如果要想改变文件名，那可以在之前用<code>gulp-rename</code>插件来改变文件流中的文件名。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> gulp = <span class="built_in">require</span>(<span class="string">'gulp'</span>),</span><br><span class="line">    rename = <span class="built_in">require</span>(<span class="string">'gulp-rename'</span>),</span><br><span class="line">    uglify = <span class="built_in">require</span>(<span class="string">"gulp-uglify"</span>);</span><br><span class="line"></span><br><span class="line">gulp.task(<span class="string">'rename'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    gulp.src(<span class="string">'js/jquery.js'</span>)</span><br><span class="line">    .pipe(uglify())  <span class="comment">//压缩</span></span><br><span class="line">    .pipe(rename(<span class="string">'jquery.min.js'</span>)) <span class="comment">//会将jquery.js重命名为jquery.min.js</span></span><br><span class="line">    .pipe(gulp.dest(<span class="string">'js'</span>));</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p>
<p>##压缩css文件<br>使用<a href="https://www.npmjs.com/package/gulp-minify-css/" target="_blank" rel="external">gulp-minify-css</a><br>安装：<code>npm install --save-dev gulp-minify-css</code><br>要压缩<code>css</code>文件时可以使用该插件<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> gulp = <span class="built_in">require</span>(<span class="string">'gulp'</span>),</span><br><span class="line">    minifyCss = <span class="built_in">require</span>(<span class="string">"gulp-minify-css"</span>);</span><br><span class="line"></span><br><span class="line">gulp.task(<span class="string">'minify-css'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    gulp.src(<span class="string">'css/*.css'</span>) <span class="comment">// 要压缩的css文件</span></span><br><span class="line">    .pipe(minifyCss()) <span class="comment">//压缩css</span></span><br><span class="line">    .pipe(gulp.dest(<span class="string">'dist/css'</span>));</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p>
<p>##html文件压缩<br>使用<a href="https://www.npmjs.com/package/gulp-minify-html/" target="_blank" rel="external">gulp-minify-html</a><br>安装：<code>npm install --save-dev gulp-minify-html</code><br>用来压缩<code>html</code>文件<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> gulp = <span class="built_in">require</span>(<span class="string">'gulp'</span>),</span><br><span class="line">    minifyHtml = <span class="built_in">require</span>(<span class="string">"gulp-minify-html"</span>);</span><br><span class="line"></span><br><span class="line">gulp.task(<span class="string">'minify-html'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    gulp.src(<span class="string">'html/*.html'</span>) <span class="comment">// 要压缩的html文件</span></span><br><span class="line">    .pipe(minifyHtml()) <span class="comment">//压缩</span></span><br><span class="line">    .pipe(gulp.dest(<span class="string">'dist/html'</span>));</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p>
<p>##文件合并<br>使用<a href="https://www.npmjs.com/package/gulp-concat/" target="_blank" rel="external">gulp-concat</a><br>安装：<code>npm install --save-dev gulp-concat</code><br>用来把多个文件合并为一个文件,我们可以用它来合并<code>js</code>或<code>css</code>文件等，这样就能减少页面的<code>http</code>请求数了<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> gulp = <span class="built_in">require</span>(<span class="string">'gulp'</span>),</span><br><span class="line">    concat = <span class="built_in">require</span>(<span class="string">"gulp-concat"</span>);</span><br><span class="line"></span><br><span class="line">gulp.task(<span class="string">'concat'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    gulp.src(<span class="string">'js/*.js'</span>)  <span class="comment">//要合并的文件</span></span><br><span class="line">    .pipe(concat(<span class="string">'all.js'</span>))  <span class="comment">// 合并匹配到的js文件并命名为 "all.js"</span></span><br><span class="line">    .pipe(gulp.dest(<span class="string">'dist/js'</span>));</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p>
<p>##自动刷新<br>可以结合<code>browser-sync</code>做多终端自动刷新，详见<a href="http://www.reeoo.co/archives/BrowserSync.html" target="_blank" rel="external">BrowserSync前端测试利器</a></p>
<p>##处理html<br>使用<a href="https://www.npmjs.com/package/gulp-processhtml/" target="_blank" rel="external">gulp-processhtml</a><br>安装：<code>npm install --save-dev gulp-processhtml</code><br>在构建时处理按你设想的修改<code>html</code>文件，比如说你构建之前你有<code>N</code>个脚本需要引入到<code>html</code>页面中，构建之后可能这<code>N</code>个文件被合并成了一个，这时候引入的地方也需要做相应的调整，那么差个插件就能派上用场了。<br>插件使用<br><figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">gulp.task(<span class="string">"processhtml"</span>, <span class="function"><span class="keyword">function</span> <span class="params">()</span> </span>&#123;</span><br><span class="line">    gulp.src(<span class="string">'../main.html'</span>)</span><br><span class="line">        .pipe(processhtml())</span><br><span class="line">        .pipe(gulp.dest(option.buildPath + <span class="string">'/'</span>))</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p>
<p><code>main.html</code>构建之前的代码<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="doctype">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">html</span> <span class="attribute">ng-app</span>=<span class="value">"app"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">head</span> <span class="attribute">lang</span>=<span class="value">"en"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">meta</span> <span class="attribute">charset</span>=<span class="value">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">meta</span> <span class="attribute">name</span>=<span class="value">"viewport"</span></span><br><span class="line">          <span class="attribute">content</span>=<span class="value">"width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">meta</span> <span class="attribute">name</span>=<span class="value">"format-detection"</span> <span class="attribute">content</span>=<span class="value">"telephone=no"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">link</span> <span class="attribute">rel</span>=<span class="value">"stylesheet"</span> <span class="attribute">href</span>=<span class="value">"style/base.css?/&gt;</span><br><span class="line">    &lt;link rel="</span><span class="value">stylesheet"</span> <span class="attribute">href</span>=<span class="value">"style/index.css?/&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;ui-view&gt;&lt;/ui-view&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;!-- build:js js/libs/libs.min.js --&gt; &lt;!--process-html插件需要用到这个注释-- &gt;</span><br><span class="line">&lt;script src="</span><span class="value">js</span>/<span class="attribute">libs</span>/<span class="attribute">angular.min.js</span>"&gt;</span><span class="tag">&lt;/<span class="title">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">script</span> <span class="attribute">src</span>=<span class="value">"js/libs/angular.touch.min.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="title">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">script</span> <span class="attribute">src</span>=<span class="value">"js/libs/zepto.20140520.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="title">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">script</span> <span class="attribute">src</span>=<span class="value">"js/libs/angular.ui.bootstrap.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="title">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">script</span> <span class="attribute">src</span>=<span class="value">"js/libs/angular-sanitize.min.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="title">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">script</span> <span class="attribute">src</span>=<span class="value">"js/libs/angular-ui-route.min.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="title">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">script</span> <span class="attribute">src</span>=<span class="value">"js/libs/fastclick.0.6.7.min.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="title">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">script</span> <span class="attribute">src</span>=<span class="value">"js/libs/carous.min.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="title">script</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- /build --&gt;</span> <span class="comment">&lt;!--process-html插件需要用到这个注释--&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">html</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p><code>main.html</code>构建之后<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="doctype">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">html</span> <span class="attribute">ng-app</span>=<span class="value">"app"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">head</span> <span class="attribute">lang</span>=<span class="value">"en"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">meta</span> <span class="attribute">charset</span>=<span class="value">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">meta</span> <span class="attribute">name</span>=<span class="value">"viewport"</span></span><br><span class="line">          <span class="attribute">content</span>=<span class="value">"width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">meta</span> <span class="attribute">name</span>=<span class="value">"format-detection"</span> <span class="attribute">content</span>=<span class="value">"telephone=no"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">link</span> <span class="attribute">rel</span>=<span class="value">"stylesheet"</span> <span class="attribute">href</span>=<span class="value">"style/base.css?/&gt;</span><br><span class="line">    &lt;link rel="</span><span class="value">stylesheet"</span> <span class="attribute">href</span>=<span class="value">"style/index.css?/&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;ui-view&gt;&lt;/ui-view&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;script src="</span><span class="value">js</span>/<span class="attribute">libs</span>/<span class="attribute">libs.min.js</span>"&gt;</span><span class="tag">&lt;/<span class="title">script</span>&gt;</span> <span class="comment">&lt;!--注意这里的变化--&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">html</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>##字符串替换<br>使用<a href="https://www.npmjs.com/package/gulp-replace/" target="_blank" rel="external">gulp-replace</a><br>安装：<code>npm install --save-dev gulp-replace</code><br>可以替换html或者txt等文件内的字符串为你想要的。<br>比如我每次构建的时候都需要去修改引用的文件的版本号，就可以使用这个插件<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">gulp.task(<span class="string">"replace"</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> date = <span class="keyword">new</span> <span class="built_in">Date</span>().getTime();</span><br><span class="line">    gulp.src(<span class="string">'../main.html'</span>)</span><br><span class="line">        .pipe(replace(<span class="regexp">/_VERSION_/gi</span>, date))</span><br><span class="line">        .pipe(gulp.dest(option.buildPath + <span class="string">'/'</span>))</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p>
<p><code>main.html</code>文件<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="doctype">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">html</span> <span class="attribute">ng-app</span>=<span class="value">"app"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">head</span> <span class="attribute">lang</span>=<span class="value">"en"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">meta</span> <span class="attribute">charset</span>=<span class="value">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">meta</span> <span class="attribute">name</span>=<span class="value">"viewport"</span></span><br><span class="line">          <span class="attribute">content</span>=<span class="value">"width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">meta</span> <span class="attribute">name</span>=<span class="value">"format-detection"</span> <span class="attribute">content</span>=<span class="value">"telephone=no"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">link</span> <span class="attribute">rel</span>=<span class="value">"stylesheet"</span> <span class="attribute">href</span>=<span class="value">"style/base.css?v=_VERSION_"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">link</span> <span class="attribute">rel</span>=<span class="value">"stylesheet"</span> <span class="attribute">href</span>=<span class="value">"style/index.css?v=_VERSION_"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">ui-view</span>&gt;</span><span class="tag">&lt;/<span class="title">ui-view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">script</span> <span class="attribute">src</span>=<span class="value">"js/config/config.js?v=_VERSION_"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="title">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">script</span> <span class="attribute">src</span>=<span class="value">"js/app.js?v=_VERSION_"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="title">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">script</span> <span class="attribute">src</span>=<span class="value">"js/service/TrackDataService.js?v=_VERSION_"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="title">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">script</span> <span class="attribute">src</span>=<span class="value">"js/service/APIService.js?v=_VERSION_"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="title">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">script</span> <span class="attribute">src</span>=<span class="value">"js/service/DService.js?v=_VERSION_"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="title">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">script</span> <span class="attribute">src</span>=<span class="value">"js/controllers/indexCtrl.js?v=_VERSION_"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="title">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">script</span> <span class="attribute">src</span>=<span class="value">"js/directive/lazy.js?v=_VERSION_"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="title">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">script</span> <span class="attribute">src</span>=<span class="value">"js/directive/slider.js?v=_VERSION_"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="title">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">script</span> <span class="attribute">src</span>=<span class="value">"js/filter/filters.js?v=_VERSION_"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="title">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">html</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>构建之后，<code>_VERSION_</code>被替换为时间戳。<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="doctype">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">html</span> <span class="attribute">ng-app</span>=<span class="value">"app"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">head</span> <span class="attribute">lang</span>=<span class="value">"en"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">meta</span> <span class="attribute">charset</span>=<span class="value">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">meta</span> <span class="attribute">name</span>=<span class="value">"viewport"</span></span><br><span class="line">          <span class="attribute">content</span>=<span class="value">"width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">meta</span> <span class="attribute">name</span>=<span class="value">"format-detection"</span> <span class="attribute">content</span>=<span class="value">"telephone=no"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">link</span> <span class="attribute">rel</span>=<span class="value">"stylesheet"</span> <span class="attribute">href</span>=<span class="value">"style/base.css?v=1433405631860"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">link</span> <span class="attribute">rel</span>=<span class="value">"stylesheet"</span> <span class="attribute">href</span>=<span class="value">"style/index.css?v=1433405631860"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">ui-view</span>&gt;</span><span class="tag">&lt;/<span class="title">ui-view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">script</span> <span class="attribute">src</span>=<span class="value">"js/config/config.js?v=1433405631860"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="title">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">script</span> <span class="attribute">src</span>=<span class="value">"js/app.js?v=1433405631860"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="title">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">script</span> <span class="attribute">src</span>=<span class="value">"js/service/TrackDataService.js?v=1433405631860"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="title">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">script</span> <span class="attribute">src</span>=<span class="value">"js/service/APIService.js?v=1433405631860"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="title">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">script</span> <span class="attribute">src</span>=<span class="value">"js/service/DService.js?v=1433405631860"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="title">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">script</span> <span class="attribute">src</span>=<span class="value">"js/controllers/indexCtrl.js?v=1433405631860"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="title">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">script</span> <span class="attribute">src</span>=<span class="value">"js/directive/lazy.js?v=1433405631860"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="title">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">script</span> <span class="attribute">src</span>=<span class="value">"js/directive/slider.js?v=1433405631860"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="title">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">script</span> <span class="attribute">src</span>=<span class="value">"js/filter/filters.js?v=1433405631860"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="title">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">html</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p><code>gulp</code>还有很多插件，大家可以去<a href="http://gulpjs.com/plugins/" target="_blank" rel="external">gulp官网</a>查看</p>
<p>#总结<br>No Need To Grunt, Take A Gulp Of Fresh Air。<br>当然，<code>grunt</code>也并非一无是处，但是现在就是喜欢<code>gulp</code>，再也回不去了。<br>最后可以看看我做的<code>gulp</code>构建的<code>demo</code>：<a href="https://github.com/ireeoo/gulp-build-project" target="_blank" rel="external">传送门</a></p>

      


    </div>

    
  </div>

  
    
<nav id="article-nav">
  
    <a href="/archives/AboutHexo.html" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption"><</strong>
      <div class="article-nav-title">
        
          关于hexo的一些问题记录
        
      </div>
    </a>
  
  
    <a href="/archives/BrowserSync.html" id="article-nav-older" class="article-nav-link-wrap">
      <div class="article-nav-title">BrowserSync前端测试利器</div>
      <strong class="article-nav-caption">></strong>
    </a>
  
</nav>

  
</article>


<div class="share">
	<!-- JiaThis Button BEGIN -->
	<div class="jiathis_style">
		<span class="jiathis_txt">分享到：</span>
		<a class="jiathis_button_tsina"></a>
		<a class="jiathis_button_cqq"></a>
		<a class="jiathis_button_douban"></a>
		<a class="jiathis_button_weixin"></a>
		<a class="jiathis_button_tumblr"></a>
		<a href="http://www.jiathis.com/share" class="jiathis jiathis_txt jtico jtico_jiathis" target="_blank"></a>
	</div>
	<script type="text/javascript" src="http://v3.jiathis.com/code/jia.js?uid=1405949716054953" charset="utf-8"></script>
	<!-- JiaThis Button END -->
</div>



<div class="duoshuo">
	<!-- 多说评论框 start -->
	<div class="ds-thread" data-thread-key="gulpjs" data-title="Gulp简易入坑" data-url="http://reeoo.co/archives/gulpjs.html"></div>
	<!-- 多说评论框 end -->
	<!-- 多说公共JS代码 start (一个网页只需插入一次) -->
	<script type="text/javascript">
	var duoshuoQuery = {short_name:"reeooco"};
	(function() {
		var ds = document.createElement('script');
		ds.type = 'text/javascript';ds.async = true;
		ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
		ds.charset = 'UTF-8';
		(document.getElementsByTagName('head')[0] 
		 || document.getElementsByTagName('body')[0]).appendChild(ds);
	})();
	</script>
	<!-- 多说公共JS代码 end -->
</div>




</div>
      <footer id="footer">
    <div class="foot_sponsor">
        <a href="https://www.upyun.com/">
            <img src="http://upfiles.b0.upaiyun.com/logo/180x90.png" style="width:90px;height: 45px;" alt="又拍云存储">
            <em>又拍提供存储</em>
        </a>
        <a href="http://hexo.io">
            <img src="http://reeooco.b0.upaiyun.com/common/hexo.svg" alt="hexo" style="width:40px;height: 40px;">
            <em style="display: block;margin-top:5px;">hexo强力驱动</em>
        </a>
    </div>
    <div class="copyright">&copy; 2015 Reeoo</div>
    <div class="beian">土星 ICP备00000001号-1</div>
</footer>
    </div>
    
  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css" type="text/css">
  <script src="/fancybox/jquery.fancybox.pack.js" type="text/javascript"></script>


<script src="/js/mobile.js" type="text/javascript"></script>
<script src="/js/main.js" type="text/javascript"></script>





<! -- mathjax config similar to math.stackexchange -->

<script type="text/x-mathjax-config">
MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
        processEscapes: true,
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    }
});

MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';                 
    }       
});
</script>

<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>


<a id="totop">返回顶部</a>



<script src="/js/totop.js"></script>

  </div>
</body>
</html>